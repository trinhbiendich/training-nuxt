(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{289:function(t,e,r){"use strict";r.r(e);r(6),r(10),r(13),r(11);var n={head:function(){return{title:""===this.pageInfo.title?"Training NuxtJS":"Training NuxtJS | "+this.pageInfo.title}},data:function(){return{pageInfo:{title:"Detail page"},user:{},imgs:[],photoIds:[],msg:"",userId:"",curPage:1,perPage:50,totalPage:1,curTotalImages:0}},mounted:function(){var t=this;this.userId=this.$route.query.userId,this.pageInfo.title="Detail of "+this.userId,this.$axios.$get("/".concat(this.userId)).then((function(e){"success"===e.type?t.user=e.data:t.msg="There are no images or data on this user"})),this.$axios.$get("/".concat(this.userId,"_photos")).then((function(e){"success"===e.type&&(t.photoIds=e.data,t.totalPage=Math.ceil(t.photoIds.length/(1*t.perPage)),t.loadImagesFromServer())}))},methods:{loadImagesFromServer:function(){var t=this;if(!(this.curPage>this.totalPage)){var e=0,r=(this.curPage-1)*this.perPage,n=r+this.perPage,o=this.photoIds.slice(r,n);this.curPage++,this.curTotalImages+=o.length,o.forEach((function(r,n){t.$axios.$get("/".concat(t.userId,"_photos_").concat(r)).then((function(r){e++,t.addImage(r),e>=o.length&&t.$nextTick((function(){$("#myGallery").justifiedGallery({rowHeight:300,lastRow:"nojustify",margins:3})}))}))}))}},addImage:function(t){"success"===t.type&&this.imgs.push(t.data)},urlMin:function(img){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=["sq","q","t","s","n","w","m","z","c","l","h","o"],i=0;i<e.length;i++){var r=e[i];if(void 0!==img["url_".concat(r)]&&(!(null!==t&&img["width_".concat(r)]<t)&&void 0!==img["url_".concat(r)]))return img["url_".concat(r)]}return"/images/no-image.png"},urlMax:function(img){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=["sq","q","t","s","n","w","m","z","c","l","h","o"].reverse(),i=0;i<e.length;i++){var r=e[i];if(void 0!==img["url_".concat(r)]&&(!(null!==t&&img["width_".concat(r)]>t)&&void 0!==img["url_".concat(r)]))return img["url_".concat(r)]}return"/images/no-image.png"}}},o=r(47),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-link",{attrs:{to:"/flickr"}},[r("span",{staticClass:"material-icons"},[t._v("reply")]),t._v(" Go back")]),t._v(" "),""!==t.msg?r("div",[r("div",{staticClass:"alert alert-info"},[t._v(t._s(t.msg))])]):t._e(),t._v(" "),r("div",{ref:"myGallery",attrs:{id:"myGallery"}},t._l(t.imgs,(function(img,e){return r("a",{key:"img_"+e,staticClass:"img-item",attrs:{href:t.urlMax(img)}},[r("img",{staticClass:"img-fluid lazy",attrs:{src:t.urlMin(img,300)}})])})),0),t._v(" "),r("a",{staticClass:"btn btn-success",on:{click:t.loadImagesFromServer}},[t._v("Load more")])],1)}),[],!1,null,"325805b8",null);e.default=component.exports}}]);