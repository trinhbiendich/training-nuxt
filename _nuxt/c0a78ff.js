(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{274:function(t,e,o){var n=o(5),r=o(205).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},278:function(t,e,o){var content=o(288);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(66).default)("3858e8d6",content,!0,{sourceMap:!1})},287:function(t,e,o){"use strict";o(278)},288:function(t,e,o){(e=o(65)(!1)).push([t.i,".center[data-v-632efc2e]{text-align:center}.center-screen[data-v-632efc2e]{position:fixed;top:45%;left:45%}.loading[data-v-632efc2e]{border:16px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:120px;height:120px;-webkit-animation:spin-data-v-632efc2e 2s linear infinite;animation:spin-data-v-632efc2e 2s linear infinite}@-webkit-keyframes spin-data-v-632efc2e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin-data-v-632efc2e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),t.exports=e},294:function(t,e,o){"use strict";o.r(e);o(7),o(11),o(14),o(85),o(274),o(12);var n=o(42),r={head:function(){return{title:""===this.pageInfo.title?"NuxtJS":this.pageInfo.title}},data:function(){return{pageInfo:{title:"Detail page"},user:{},imgs:[],photoIds:[],msg:"",userId:"",curPage:1,perPage:50,totalPage:1,curTotalImages:0,isLoading:!1,pages:[],focusPage:""}},mounted:function(){var t=this;this.userId=this.$route.query.userId,this.pageInfo.title="Detail of "+this.userId,this.loadUserInfo(),this.loadPages((function(){t.loadImageForPage(t.pages[0])}))},methods:{loadImageForPage:function(t){var e=this;t!==this.focusPage&&(this.isLoading=!0,this.photoIds=[],this.curPage=1,this.totalPage=1,this.imgs=[],this.curTotalImages=0,this.focusPage=t,this.$axios.$get("/".concat(this.userId).concat(t)).then((function(t){if("success"===t.type){e.photoIds=t.data;var o=0;"object"===Object(n.a)(e.photoIds)?(o=Object.keys(e.photoIds).length,e.photoIds=Object.values(e.photoIds)):o=e.photoIds.length,e.totalPage=Math.ceil(o/e.perPage),e.loadImagesFromServer()}})))},loadUserInfo:function(){var t=this;this.$axios.$get("/users/".concat(this.userId)).then((function(e){if("success"===e.type){t.user=e.data;var o=""!==t.user.realname?t.user.realname:t.user.username;t.pageInfo.title="[".concat(t.userId,"] - ").concat(o)}else t.msg="There are no images or data on this user"}))},loadPages:function(t){var e=this;this.$axios.$get("/".concat(this.userId,"_pageInfo")).then((function(o){"success"===o.type?(e.pages=o.data,t()):e.msg="There are no images or data on this user"}))},loadImagesFromServer:function(){var t=this;if(!(this.curPage>this.totalPage)){var e=0,o=(this.curPage-1)*this.perPage,n=o+this.perPage;this.isLoading=!0;var r=this.photoIds.slice(o,n);this.curPage++,this.curTotalImages+=r.length,r.forEach((function(o,n){t.$axios.$get("/".concat(t.userId).concat(t.focusPage,"_").concat(o)).then((function(o){e++,t.addImage(o),e>=r.length&&(t.isLoading=!1,t.$nextTick((function(){$("#myGallery").justifiedGallery({rowHeight:300,lastRow:"nojustify",margins:3})})))}))}))}},addImage:function(t){"success"===t.type&&this.imgs.push(t.data)},urlMin:function(img){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=["sq","q","t","s","n","w","m","z","c","l","h","o"],i=0;i<e.length;i++){var o=e[i];if(void 0!==img["url_".concat(o)]&&(!(null!==t&&img["width_".concat(o)]<t)&&void 0!==img["url_".concat(o)]))return img["url_".concat(o)]}return"/images/no-image.png"},urlMax:function(img){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=["sq","q","t","s","n","w","m","z","c","l","h","k","3k","4k","5k","6k","o"].reverse();if("video"===img.media)return"https://www.flickr.com/video_download.gne?id=".concat(img.id);for(var i=0;i<e.length;i++){var o=e[i];if(void 0!==img["url_".concat(o)]&&(!(null!==t&&img["width_".concat(o)]>t)&&void 0!==img["url_".concat(o)]))return img["url_".concat(o)]}return"/images/no-image.png"}}},c=(o(287),o(49)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 p-3"},[o("router-link",{staticClass:"btn btn-success",attrs:{to:"/flickr"}},[o("i",{staticClass:"fa fa-reply"}),t._v(" Go back")]),t._v(" "),t._m(0)],1),t._v(" "),o("div",{staticClass:"col-12 p-3"},t._l(t.pages,(function(e){return o("a",{key:e,staticClass:"badge mr-2",class:{"badge-success":e===t.focusPage,"badge-info":e!==t.focusPage},attrs:{href:"javascript:;"},on:{click:function(o){return t.loadImageForPage(e)}}},[t._v(t._s(e))])})),0)]),t._v(" "),""!==t.msg?o("div",[o("div",{staticClass:"alert alert-info"},[t._v(t._s(t.msg))])]):t._e(),t._v(" "),o("div",{ref:"myGallery",attrs:{id:"myGallery"}},t._l(t.imgs,(function(img,e){return o("a",{key:"img_"+e,staticClass:"img-item",attrs:{target:"_blank",href:t.urlMax(img)}},[o("img",{staticClass:"img-fluid lazy",attrs:{src:t.urlMin(img,300)}})])})),0),t._v(" "),t.isLoading?o("div",{ref:"loading",staticClass:"loading center-screen"}):t._e(),t._v(" "),o("div",{staticClass:"center"},[o("a",{staticClass:"btn btn-success",on:{click:t.loadImagesFromServer}},[t._v("Load more")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-download"}),this._v(" Download")])}],!1,null,"632efc2e",null);e.default=component.exports}}]);