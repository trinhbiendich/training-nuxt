(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{318:function(e,t,r){"use strict";r.r(t);r(7),r(17),r(54),r(68),r(209);var n=r(23),o=(r(55),r(20)),c={scrollToTop:!0,data:function(){return{images:[],caching:[],onLoading:!0,testUrl:""}},mounted:function(){var e=this;this.getImages().then((function(t){e.loadingImgs()}))},methods:{scrollToTop:function(){$("html, body").animate({scrollTop:0},"slow")},loadingImgs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.nextItems();case 2:e.$nextTick((function(){$("#myGallery").justifiedGallery({rowHeight:300,lastRow:"nojustify",margins:3}).on("jg.complete",(function(){}))}));case 3:case"end":return t.stop()}}),t)})))()},nextItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.images&&0!=e.images.length){t.next=2;break}return t.abrupt("return");case 2:for(e.onLoading=!1,r=[],i=0;i<100;i++)r.push(e.getImage(e.images.pop()));return t.next=7,Promise.all(r);case 7:o=t.sent,e.onLoading=!0,e.caching=[].concat(Object(n.a)(e.caching),Object(n.a)(o));case 10:case"end":return t.stop()}}),t)})))()},getImages:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/jsons/urls.".concat(e.$route.params.id,".json"));case 2:if(!(r=t.sent).ok){t.next=10;break}return t.next=6,r.json();case 6:n=t.sent,e.images=e.shuffle(n),t.next=11;break;case 10:e.images=[];case 11:case"end":return t.stop()}}),t)})))()},shuffle:function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e},getImage:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$localforage.images.getItem(e);case 2:if(null==(n=r.sent)){r.next=5;break}return r.abrupt("return",t.imgUrlFromBytes(n));case 5:return r.next=7,fetch("https://cdn.bolacmuito.xyz/ximg.php?url="+e);case 7:return o=r.sent,r.next=10,o.arrayBuffer();case 10:return a=r.sent,s=o.headers.get("content-type"),n={buffer:a,bufferType:s,path:e},r.next=15,t.$localforage.images.setItem(e,n);case 15:return r.abrupt("return",t.imgUrlFromBytes(n));case 16:case"end":return r.stop()}}),r)})))()},imgUrlFromBytes:function(e){return URL.createObjectURL(new Blob([e.buffer],{type:e.bufferType}))}}},f=r(49),component=Object(f.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"myGallery"}},e._l(e.caching,(function(image){return r("a",{key:image,attrs:{target:"_blank",href:image}},[r("img",{staticClass:"img-fluid lazy",attrs:{src:image}})])})),0),e._v(" "),r("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:e.loadingImgs}},[e._v("Load more\n    "),r("i",{staticClass:"fa fa-spinner fa-spin",class:{hidden:e.onLoading}})]),e._v(" "),r("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(t){return e.scrollToTop()}}},[e._v("Go to Top "),r("i",{staticClass:"fas fa-arrow-up"})])])}),[],!1,null,"3a9cb6e4",null);t.default=component.exports}}]);